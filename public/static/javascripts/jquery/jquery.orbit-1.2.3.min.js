(function(a){a.fn.orbit=function(b){var c={animation:"horizontal-push",animationSpeed:600,timer:true,advanceSpeed:4000,pauseOnHover:false,startClockOnMouseOut:false,startClockOnMouseOutAfter:1000,directionalNav:true,captions:true,captionAnimation:"fade",captionAnimationSpeed:600,bullets:false,bulletThumbs:false,bulletThumbLocation:"",afterSlideChange:function(){}};var b=a.extend(c,b);return this.each(function(){var p=0,v=0,f,e,I;var J=a(this).addClass("orbit"),k=J.wrap('<div class="orbit-wrapper" />').parent();J.add(f).width("1px").height("1px");var w=J.children("img, a, div");w.each(function(){var M=a(this),N=M.width(),L=M.height();if(N>J.width()){J.add(k).width(N);f=J.width()}if(L>J.height()){J.add(k).height(L);e=J.height()}v++});function j(){I=false}function G(){I=true}if(w.length==1){b.directionalNav=false;b.timer=false;b.bullets=false}w.eq(p).css({"z-index":3}).fadeIn(function(){w.css({display:"block"})});function H(){if(!b.timer||b.timer=="false"){return false}else{if(q.is(":hidden")){K=setInterval(function(L){B("next")},b.advanceSpeed)}else{D=true;l.removeClass("active");K=setInterval(function(M){var L="rotate("+z+"deg)";z+=2;m.css({"-webkit-transform":L,"-moz-transform":L,"-o-transform":L});if(z>180){m.addClass("move");A.addClass("move")}if(z>360){m.removeClass("move");A.removeClass("move");z=0;B("next")}},b.advanceSpeed/180)}}}function g(){if(!b.timer||b.timer=="false"){return false}else{D=false;clearInterval(K);l.addClass("active")}}if(b.timer){var t='<div class="timer"><span class="mask"><span class="rotator"></span></span><span class="pause"></span></div>';k.append(t);var q=k.children("div.timer"),D;if(q.length!=0){var m=a("div.timer span.rotator"),A=a("div.timer span.mask"),l=a("div.timer span.pause"),z=0,K;H();q.click(function(){if(!D){H()}else{g()}});if(b.startClockOnMouseOut){var C;k.mouseleave(function(){C=setTimeout(function(){if(!D){H()}},b.startClockOnMouseOutAfter)});k.mouseenter(function(){clearTimeout(C)})}}}if(b.pauseOnHover){k.mouseenter(function(){g()})}if(b.captions){var s='<div class="orbit-caption"></div>';k.append(s);var F=k.children(".orbit-caption");r()}function r(){if(!b.captions||b.captions=="false"){return false}else{var L=w.eq(p).data("caption");_captionHTML=a(L).html();if(_captionHTML){F.attr("id",L).html(_captionHTML);if(b.captionAnimation=="none"){F.show()}if(b.captionAnimation=="fade"){F.fadeIn(b.captionAnimationSpeed)}if(b.captionAnimation=="slideOpen"){F.slideDown(b.captionAnimationSpeed)}}else{if(b.captionAnimation=="none"){F.hide()}if(b.captionAnimation=="fade"){F.fadeOut(b.captionAnimationSpeed)}if(b.captionAnimation=="slideOpen"){F.slideUp(b.captionAnimationSpeed)}}}}if(b.directionalNav){if(b.directionalNav=="false"){return false}var n='<div class="slider-nav"><span class="right">Right</span><span class="left">Left</span></div>';k.append(n);var x=k.children("div.slider-nav").children("span.left"),E=k.children("div.slider-nav").children("span.right");x.click(function(){g();B("prev")});E.click(function(){g();B("next")})}if(b.bullets){var d='<ul class="orbit-bullets"></ul>';k.append(d);var h=k.children("ul.orbit-bullets");for(i=0;i<v;i++){var o=a("<li>"+(i+1)+"</li>");if(b.bulletThumbs){var y=w.eq(i).data("thumb");if(y){var o=a('<li class="has-thumb">'+i+"</li>");o.css({background:"url("+b.bulletThumbLocation+y+") no-repeat"})}}k.children("ul.orbit-bullets").append(o);o.data("index",i);o.click(function(){g();B(a(this).data("index"))})}u()}function u(){if(!b.bullets){return false}else{h.children("li").removeClass("active").eq(p).addClass("active")}}function B(N){var M=p,L=N;if(M==L){return false}function O(){w.eq(M).css({"z-index":1});j();b.afterSlideChange.call(this)}if(w.length=="1"){return false}if(!I){G();if(N=="next"){p++;if(p==v){p=0}}else{if(N=="prev"){p--;if(p<0){p=v-1}}else{p=N;if(M<p){L="next"}else{if(M>p){L="prev"}}}}u();w.eq(M).css({"z-index":2});if(b.animation=="fade"){w.eq(p).css({opacity:0,"z-index":3}).animate({opacity:1},b.animationSpeed,O)}if(b.animation=="horizontal-slide"){if(L=="next"){w.eq(p).css({left:f,"z-index":3}).animate({left:0},b.animationSpeed,O)}if(L=="prev"){w.eq(p).css({left:-f,"z-index":3}).animate({left:0},b.animationSpeed,O)}}if(b.animation=="vertical-slide"){if(L=="prev"){w.eq(p).css({top:e,"z-index":3}).animate({top:0},b.animationSpeed,O)}if(L=="next"){w.eq(p).css({top:-e,"z-index":3}).animate({top:0},b.animationSpeed,O)}}if(b.animation=="horizontal-push"){if(L=="next"){w.eq(p).css({left:f,"z-index":3}).animate({left:0},b.animationSpeed,O);w.eq(M).animate({left:-f},b.animationSpeed)}if(L=="prev"){w.eq(p).css({left:-f,"z-index":3}).animate({left:0},b.animationSpeed,O);w.eq(M).animate({left:f},b.animationSpeed)}}r()}}})}})(jQuery);
